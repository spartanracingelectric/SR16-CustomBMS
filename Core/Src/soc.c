#include "soc.h"

#include <math.h>
#include <stdint.h>

#include "adc.h"
#include "main.h"

void SOC_updateCurrent(batteryModule *batt);

uint16_t SOC_offsetFilter(uint16_t measuredX, uint16_t lowerX, uint16_t upperX,
                          uint16_t lowerY, uint16_t upperY);
uint16_t SOC_searchCapacity(uint16_t **data, uint16_t voltage, uint16_t size);

void SOC_get0TData(uint16_t **output, float cRating, int *datalen);
void SOC_get25TData(uint16_t **output, float cRating, int *datalen);
void SOC_get40TData(uint16_t **output, float cRating, int *datalen);

void SOC_getChargeData0TDot1C(uint16_t **output, int *datalen);
void SOC_getChargeData0T1C(uint16_t **output, int *datalen);
void SOC_getChargeData0T4C(uint16_t **output, int *datalen);

void SOC_getChargeData25TDot1C(uint16_t **output, int *datalen);
void SOC_getChargeData25TDot5C(uint16_t **output, int *datalen);
void SOC_getChargeData25T1C(uint16_t **output, int *datalen);
void SOC_getChargeData25T2C(uint16_t **output, int *datalen);
void SOC_getChargeData25T4C(uint16_t **output, int *datalen);

void SOC_getChargeData40TDot1C(uint16_t **output, int *datalen);
void SOC_getChargeData40T1C(uint16_t **output, int *datalen);
void SOC_getChargeData40T4C(uint16_t **output, int *datalen);

void SOC_getInitialCharge(batteryModule *batt) {
    uint16_t voltage;
    for (int i = 0; i < NUM_DEVICES; ++i) {
        voltage += batt->average_volt[i];
    }
    voltage = voltage / NUM_DEVICES;

    uint16_t temperature;
    for (int i = 0; i < NUM_DEVICES; ++i) {
        temperature += batt->average_temp[i];
    }
    temperature = temperature / NUM_DEVICES;
    // C-rating = current draw / capacity
    SOC_updateCurrent(batt);
    float cRating = (float)batt->current / (MAX_SHUNT_VOLTAGE * 1000);
    uint16_t **data;
    int datalen;
    int tempCharts[] = {0, 25, 40};

    uint16_t minDiff = 100;
    int selectTemp;
    for (int i = 0; i < 3; ++i) {
        if (abs(temperature - tempCharts[i]) < minDiff) {
            minDiff = abs(temperature - tempCharts[i]);
            selectTemp = tempCharts[i];
        }
    }

    switch (selectTemp) {
        case 0:
            SOC_get0TData(data, cRating, &datalen);
            break;
        case 25:
            SOC_get25TData(data, cRating, &datalen);
            break;
        default:
            SOC_get40TData(data, cRating, &datalen);
            break;
    }

    batt->soc = SOC_searchCapacity(data, (uint16_t)(voltage / 10.0), datalen);

    for (int i = 0; i < datalen; ++i) {
        free(data[i]);
    }
    free(data);
}

void SOC_updateCurrent(batteryModule *batt) {
    uint32_t adcValue = 0;
    HAL_ADC_Start(&hadc2);
    if (HAL_ADC_PollForConversion(&hadc2, HAL_MAX_DELAY) == HAL_OK) {
        adcValue = HAL_ADC_GetValue(&hadc2);
    }
    HAL_ADC_Stop(&hadc2);
    float voltage = ((float)adcValue / ADC_RESOLUTION) * V_REF;
    batt->current = (voltage / MAX_SHUNT_VOLTAGE) * MAX_SHUNT_AMPAGE;
}

void SOC_updateCharge(batteryModule *batt, uint32_t elapsed_time) {
    SOC_updateCurrent(batt);
    batt->soc -= (uint16_t)(batt->current * (float)(elapsed_time / 3600000.0f));
}

uint16_t SOC_offsetFilter(uint16_t measuredX, uint16_t lowerX, uint16_t upperX,
                          uint16_t lowerY, uint16_t upperY) {
    return ((float)(measuredX - lowerX) / (upperX - lowerX)) *
               (upperY - lowerY) +
           lowerY;
}

uint16_t SOC_searchCapacity(uint16_t **data, uint16_t target, uint16_t size) {
    // Get the two closest capacities
    uint16_t left = 0;
    uint16_t right = size - 1;

    while (left <= right) {
        uint16_t mid = left + (right - left) / 2;

        if (data[mid][0] == target) {
            return data[mid][1];
        }

        if (data[mid][0] > target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return SOC_offsetFilter(target, data[right][0], data[left][0],
                            data[right][1], data[left][1]);
}

void SOC_get0TData(uint16_t **output, float cRating, int *datalen) {
    float ratingCharts[] = {0.1, 1, 4};

    uint16_t minDiff = 100;
    int selectRating;
    for (int i = 0; i < 3; ++i) {
        if (fabs(cRating - ratingCharts[i]) < minDiff) {
            minDiff = fabs(cRating - ratingCharts[i]);
            selectRating = ratingCharts[i];
        }
    }

    if (selectRating == 0.1) {
        SOC_getChargeData0TDot1C(output, datalen);
    } else if (selectRating == 1) {
        SOC_getChargeData0T1C(output, datalen);
    } else {
        SOC_getChargeData0T4C(output, datalen);
    }
}

void SOC_get25TData(uint16_t **output, float cRating, int *datalen) {
    float ratingCharts[] = {0.1, 0.5, 1, 2, 4};

    uint16_t minDiff = 100;
    int selectRating;
    for (int i = 0; i < 5; ++i) {
        if (fabs(cRating - ratingCharts[i]) < minDiff) {
            minDiff = fabs(cRating - ratingCharts[i]);
            selectRating = ratingCharts[i];
        }
    }

    if (selectRating == 0.1) {
        SOC_getChargeData25TDot1C(output, datalen);
    } else if (selectRating == 0.5) {
        SOC_getChargeData25TDot5C(output, datalen);
    } else if (selectRating == 1) {
        SOC_getChargeData25T1C(output, datalen);
    } else if (selectRating == 2) {
        SOC_getChargeData25T2C(output, datalen);
    } else {
        SOC_getChargeData25T4C(output, datalen);
    }
}

void SOC_get40TData(uint16_t **output, float cRating, int *datalen) {
    float ratingCharts[] = {0.1, 1, 4};

    uint16_t minDiff = 100;
    int selectRating;
    for (int i = 0; i < 3; ++i) {
        if (fabs(cRating - ratingCharts[i]) < minDiff) {
            minDiff = fabs(cRating - ratingCharts[i]);
            selectRating = ratingCharts[i];
        }
    }

    if (selectRating == 0.1) {
        SOC_getChargeData0TDot1C(output, datalen);
    } else if (selectRating == 1) {
        SOC_getChargeData0T1C(output, datalen);
    } else {
        SOC_getChargeData0T4C(output, datalen);
    }
}

void SOC_getChargeData0TDot1C(uint16_t **output, int *datalen) {
    *datalen = 202;
    uint16_t data[][2] = {
        {4172, 2924}, {4131, 2910}, {4119, 2896}, {4109, 2882}, {4100, 2868},
        {4093, 2854}, {4087, 2840}, {4082, 2826}, {4077, 2812}, {4073, 2798},
        {4069, 2784}, {4066, 2770}, {4063, 2756}, {4060, 2742}, {4058, 2728},
        {4055, 2714}, {4053, 2700}, {4050, 2686}, {4048, 2672}, {4046, 2658},
        {4044, 2644}, {4042, 2630}, {4039, 2616}, {4037, 2602}, {4035, 2588},
        {4032, 2574}, {4030, 2560}, {4026, 2546}, {4023, 2533}, {4020, 2519},
        {4016, 2505}, {4012, 2491}, {4007, 2477}, {4003, 2463}, {3998, 2449},
        {3993, 2435}, {3987, 2421}, {3982, 2407}, {3976, 2393}, {3970, 2379},
        {3964, 2365}, {3958, 2351}, {3952, 2337}, {3946, 2323}, {3939, 2309},
        {3933, 2295}, {3927, 2281}, {3921, 2267}, {3915, 2253}, {3909, 2239},
        {3903, 2225}, {3898, 2211}, {3892, 2197}, {3888, 2183}, {3883, 2169},
        {3878, 2155}, {3873, 2141}, {3869, 2127}, {3864, 2113}, {3860, 2099},
        {3856, 2085}, {3852, 2071}, {3849, 2057}, {3845, 2043}, {3842, 2029},
        {3838, 2015}, {3834, 2001}, {3831, 1987}, {3827, 1973}, {3824, 1959},
        {3820, 1945}, {3817, 1931}, {3813, 1917}, {3809, 1903}, {3805, 1889},
        {3802, 1876}, {3798, 1862}, {3793, 1848}, {3789, 1834}, {3785, 1820},
        {3781, 1806}, {3776, 1792}, {3771, 1778}, {3767, 1764}, {3762, 1750},
        {3757, 1736}, {3751, 1722}, {3746, 1708}, {3740, 1694}, {3735, 1680},
        {3729, 1666}, {3724, 1652}, {3718, 1638}, {3713, 1624}, {3707, 1610},
        {3701, 1596}, {3695, 1582}, {3690, 1568}, {3684, 1554}, {3679, 1540},
        {3673, 1526}, {3668, 1512}, {3662, 1498}, {3657, 1484}, {3651, 1470},
        {3646, 1456}, {3640, 1442}, {3634, 1428}, {3628, 1414}, {3623, 1400},
        {3617, 1386}, {3611, 1372}, {3606, 1358}, {3600, 1344}, {3595, 1330},
        {3589, 1316}, {3584, 1302}, {3579, 1288}, {3574, 1274}, {3569, 1260},
        {3565, 1247}, {3561, 1233}, {3556, 1219}, {3552, 1205}, {3548, 1191},
        {3543, 1177}, {3539, 1163}, {3535, 1149}, {3531, 1135}, {3526, 1121},
        {3522, 1107}, {3517, 1093}, {3512, 1079}, {3506, 1065}, {3501, 1051},
        {3496, 1037}, {3491, 1023}, {3485, 1010}, {3480, 995},  {3475, 981},
        {3470, 967},  {3464, 953},  {3458, 939},  {3452, 925},  {3447, 911},
        {3441, 897},  {3434, 883},  {3428, 869},  {3421, 855},  {3415, 841},
        {3408, 827},  {3401, 813},  {3394, 799},  {3387, 785},  {3379, 771},
        {3371, 757},  {3363, 743},  {3355, 729},  {3346, 715},  {3338, 701},
        {3329, 687},  {3320, 673},  {3310, 659},  {3300, 645},  {3290, 631},
        {3280, 617},  {3270, 604},  {3260, 590},  {3249, 576},  {3239, 562},
        {3229, 548},  {3219, 534},  {3209, 520},  {3199, 506},  {3190, 492},
        {3180, 478},  {3171, 464},  {3162, 450},  {3152, 436},  {3143, 422},
        {3133, 408},  {3122, 394},  {3112, 380},  {3101, 366},  {3089, 352},
        {3076, 338},  {3063, 324},  {3048, 310},  {3032, 296},  {3015, 282},
        {2996, 268},  {2976, 254},  {2952, 240},  {2926, 226},  {2896, 212},
        {2861, 198},  {2820, 184},  {2770, 170},  {2706, 156},  {2619, 142},
        {2517, 130},  {2500, 128}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}
void SOC_getChargeData0T1C(uint16_t **output, int *datalen) {
    *datalen = 198;
    uint16_t data[][2] = {
        {4162, 2915}, {3975, 2901}, {3951, 2888}, {3938, 2874}, {3930, 2861},
        {3924, 2847}, {3919, 2834}, {3915, 2820}, {3912, 2807}, {3910, 2793},
        {3908, 2780}, {3905, 2766}, {3904, 2753}, {3902, 2739}, {3900, 2726},
        {3898, 2712}, {3896, 2699}, {3894, 2685}, {3893, 2672}, {3891, 2658},
        {3889, 2645}, {3887, 2631}, {3885, 2618}, {3883, 2604}, {3881, 2591},
        {3878, 2577}, {3875, 2564}, {3873, 2550}, {3870, 2537}, {3867, 2523},
        {3864, 2510}, {3860, 2496}, {3856, 2483}, {3853, 2469}, {3849, 2455},
        {3845, 2442}, {3840, 2428}, {3836, 2415}, {3831, 2401}, {3826, 2388},
        {3821, 2374}, {3816, 2361}, {3812, 2347}, {3807, 2334}, {3801, 2320},
        {3796, 2307}, {3791, 2293}, {3786, 2280}, {3781, 2266}, {3777, 2253},
        {3772, 2239}, {3767, 2226}, {3762, 2212}, {3757, 2199}, {3753, 2185},
        {3748, 2172}, {3743, 2158}, {3739, 2145}, {3735, 2131}, {3731, 2118},
        {3726, 2104}, {3722, 2091}, {3719, 2077}, {3714, 2064}, {3710, 2050},
        {3706, 2037}, {3702, 2023}, {3699, 2010}, {3694, 1996}, {3690, 1983},
        {3686, 1969}, {3682, 1956}, {3678, 1942}, {3674, 1929}, {3670, 1915},
        {3666, 1902}, {3662, 1888}, {3657, 1875}, {3653, 1861}, {3649, 1848},
        {3644, 1834}, {3640, 1821}, {3635, 1807}, {3631, 1794}, {3626, 1780},
        {3621, 1767}, {3616, 1753}, {3612, 1740}, {3607, 1726}, {3602, 1713},
        {3597, 1699}, {3592, 1685}, {3587, 1672}, {3582, 1658}, {3577, 1645},
        {3572, 1631}, {3567, 1618}, {3562, 1604}, {3557, 1591}, {3552, 1577},
        {3546, 1564}, {3541, 1550}, {3536, 1537}, {3530, 1523}, {3525, 1510},
        {3520, 1496}, {3515, 1483}, {3509, 1469}, {3504, 1456}, {3499, 1442},
        {3493, 1429}, {3488, 1415}, {3482, 1402}, {3478, 1388}, {3472, 1375},
        {3467, 1361}, {3462, 1348}, {3457, 1334}, {3452, 1321}, {3447, 1307},
        {3442, 1294}, {3438, 1280}, {3433, 1267}, {3428, 1253}, {3424, 1240},
        {3419, 1226}, {3414, 1213}, {3410, 1199}, {3405, 1186}, {3401, 1172},
        {3396, 1159}, {3392, 1145}, {3387, 1132}, {3383, 1118}, {3378, 1105},
        {3374, 1091}, {3369, 1078}, {3365, 1064}, {3360, 1051}, {3355, 1037},
        {3351, 1024}, {3346, 1010}, {3341, 997},  {3336, 983},  {3331, 970},
        {3326, 956},  {3322, 943},  {3316, 929},  {3311, 915},  {3306, 902},
        {3301, 888},  {3295, 875},  {3290, 861},  {3284, 848},  {3278, 834},
        {3272, 821},  {3266, 807},  {3260, 794},  {3253, 780},  {3247, 767},
        {3240, 753},  {3234, 740},  {3227, 726},  {3220, 713},  {3212, 699},
        {3205, 686},  {3198, 672},  {3190, 659},  {3182, 645},  {3174, 632},
        {3166, 618},  {3158, 605},  {3150, 591},  {3141, 578},  {3132, 564},
        {3123, 551},  {3114, 537},  {3105, 524},  {3095, 510},  {3085, 497},
        {3075, 483},  {3064, 470},  {3054, 456},  {3042, 443},  {3030, 429},
        {3017, 416},  {3003, 402},  {2987, 389},  {2970, 375},  {2951, 362},
        {2929, 348},  {2902, 335},  {2870, 321},  {2828, 308},  {2773, 294},
        {2701, 281},  {2607, 267},  {2500, 255}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData0T4C(uint16_t **output, int *datalen) {
    *datalen = 202;
    uint16_t data[][2] = {
        {4171, 2923}, {3751, 2909}, {3718, 2895}, {3701, 2882}, {3691, 2868},
        {3685, 2854}, {3682, 2840}, {3680, 2826}, {3679, 2812}, {3679, 2798},
        {3679, 2785}, {3679, 2771}, {3680, 2757}, {3680, 2743}, {3680, 2729},
        {3680, 2715}, {3681, 2701}, {3680, 2688}, {3680, 2674}, {3680, 2660},
        {3680, 2646}, {3680, 2632}, {3679, 2618}, {3679, 2605}, {3678, 2591},
        {3678, 2577}, {3677, 2563}, {3676, 2549}, {3675, 2535}, {3674, 2521},
        {3672, 2507}, {3671, 2494}, {3669, 2480}, {3668, 2466}, {3666, 2453},
        {3664, 2438}, {3662, 2424}, {3659, 2411}, {3657, 2397}, {3654, 2383},
        {3652, 2369}, {3648, 2355}, {3646, 2341}, {3642, 2327}, {3639, 2313},
        {3636, 2300}, {3633, 2286}, {3630, 2272}, {3626, 2259}, {3623, 2245},
        {3620, 2231}, {3616, 2217}, {3613, 2203}, {3610, 2189}, {3607, 2175},
        {3604, 2161}, {3600, 2147}, {3597, 2133}, {3594, 2120}, {3591, 2106},
        {3588, 2092}, {3585, 2078}, {3582, 2065}, {3579, 2051}, {3575, 2037},
        {3572, 2023}, {3569, 2010}, {3566, 1995}, {3563, 1981}, {3559, 1967},
        {3556, 1953}, {3553, 1939}, {3549, 1926}, {3546, 1912}, {3543, 1898},
        {3539, 1884}, {3536, 1870}, {3532, 1856}, {3529, 1843}, {3525, 1829},
        {3522, 1815}, {3518, 1801}, {3514, 1787}, {3510, 1773}, {3507, 1759},
        {3503, 1745}, {3499, 1732}, {3495, 1718}, {3491, 1704}, {3487, 1690},
        {3483, 1676}, {3480, 1663}, {3475, 1649}, {3470, 1635}, {3466, 1621},
        {3462, 1607}, {3457, 1593}, {3453, 1579}, {3449, 1566}, {3444, 1552},
        {3439, 1538}, {3435, 1524}, {3430, 1510}, {3426, 1496}, {3421, 1482},
        {3417, 1468}, {3412, 1454}, {3408, 1441}, {3403, 1427}, {3398, 1413},
        {3394, 1399}, {3390, 1385}, {3385, 1371}, {3381, 1357}, {3376, 1344},
        {3372, 1330}, {3367, 1316}, {3363, 1302}, {3359, 1288}, {3354, 1274},
        {3350, 1260}, {3345, 1247}, {3341, 1233}, {3337, 1219}, {3332, 1205},
        {3328, 1191}, {3324, 1177}, {3319, 1163}, {3315, 1150}, {3311, 1136},
        {3306, 1122}, {3302, 1108}, {3298, 1094}, {3293, 1080}, {3289, 1067},
        {3284, 1053}, {3280, 1040}, {3275, 1025}, {3270, 1011}, {3266, 997},
        {3262, 983},  {3257, 970},  {3252, 956},  {3247, 942},  {3243, 928},
        {3238, 914},  {3233, 900},  {3228, 887},  {3222, 873},  {3217, 859},
        {3212, 845},  {3206, 831},  {3201, 818},  {3195, 804},  {3189, 790},
        {3184, 776},  {3178, 762},  {3171, 748},  {3165, 734},  {3158, 721},
        {3152, 707},  {3145, 693},  {3138, 679},  {3131, 665},  {3123, 651},
        {3116, 637},  {3110, 624},  {3103, 610},  {3100, 596},  {3092, 582},
        {3084, 568},  {3076, 554},  {3067, 540},  {3058, 527},  {3049, 513},
        {3040, 499},  {3031, 486},  {3021, 472},  {3011, 458},  {3001, 444},
        {2990, 430},  {2979, 416},  {2968, 402},  {2956, 388},  {2944, 374},
        {2931, 360},  {2917, 347},  {2903, 333},  {2887, 319},  {2871, 305},
        {2853, 292},  {2834, 278},  {2813, 264},  {2790, 250},  {2765, 236},
        {2738, 223},  {2706, 221},  {2671, 208},  {2630, 194},  {2582, 180},
        {2524, 166},  {2500, 161}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData25TDot1C(uint16_t **output, int *datalen) {
    *datalen = 202;
    uint16_t data[][2] = {
        {4178, 2921}, {4156, 2907}, {4145, 2892}, {4134, 2878}, {4126, 2863},
        {4119, 2849}, {4112, 2834}, {4107, 2820}, {4102, 2805}, {4098, 2791},
        {4094, 2776}, {4090, 2762}, {4088, 2747}, {4085, 2733}, {4082, 2718},
        {4080, 2704}, {4078, 2689}, {4076, 2675}, {4074, 2660}, {4072, 2646},
        {4070, 2631}, {4069, 2617}, {4067, 2602}, {4065, 2588}, {4063, 2573},
        {4062, 2559}, {4059, 2544}, {4057, 2530}, {4054, 2516}, {4052, 2501},
        {4048, 2487}, {4044, 2472}, {4040, 2458}, {4036, 2443}, {4032, 2429},
        {4027, 2414}, {4022, 2400}, {4016, 2385}, {4011, 2371}, {4005, 2356},
        {3999, 2342}, {3993, 2327}, {3987, 2313}, {3981, 2298}, {3975, 2284},
        {3968, 2269}, {3962, 2255}, {3955, 2240}, {3949, 2226}, {3942, 2211},
        {3935, 2197}, {3928, 2182}, {3921, 2168}, {3915, 2153}, {3908, 2139},
        {3902, 2124}, {3895, 2110}, {3890, 2095}, {3884, 2081}, {3879, 2066},
        {3874, 2052}, {3870, 2038}, {3866, 2023}, {3862, 2009}, {3858, 1994},
        {3855, 1980}, {3851, 1965}, {3847, 1951}, {3844, 1936}, {3840, 1922},
        {3837, 1907}, {3834, 1893}, {3830, 1878}, {3826, 1864}, {3822, 1849},
        {3819, 1835}, {3815, 1820}, {3811, 1806}, {3807, 1791}, {3803, 1777},
        {3799, 1762}, {3795, 1748}, {3790, 1733}, {3786, 1719}, {3782, 1704},
        {3777, 1690}, {3773, 1675}, {3768, 1661}, {3764, 1646}, {3759, 1632},
        {3754, 1617}, {3750, 1603}, {3745, 1588}, {3740, 1574}, {3735, 1559},
        {3729, 1545}, {3724, 1531}, {3718, 1516}, {3712, 1502}, {3706, 1487},
        {3700, 1473}, {3694, 1458}, {3687, 1444}, {3680, 1429}, {3674, 1415},
        {3667, 1400}, {3661, 1386}, {3655, 1371}, {3648, 1357}, {3642, 1342},
        {3636, 1328}, {3629, 1313}, {3622, 1299}, {3614, 1284}, {3607, 1270},
        {3600, 1255}, {3594, 1241}, {3587, 1226}, {3581, 1212}, {3574, 1197},
        {3567, 1183}, {3561, 1168}, {3555, 1154}, {3551, 1139}, {3547, 1125},
        {3543, 1110}, {3539, 1096}, {3536, 1081}, {3532, 1067}, {3528, 1052},
        {3524, 1038}, {3520, 1024}, {3515, 1009}, {3509, 995},  {3502, 980},
        {3493, 966},  {3486, 951},  {3480, 937},  {3474, 922},  {3468, 908},
        {3461, 893},  {3455, 879},  {3448, 864},  {3441, 850},  {3434, 835},
        {3427, 821},  {3420, 806},  {3412, 792},  {3405, 777},  {3397, 763},
        {3389, 748},  {3381, 734},  {3373, 719},  {3365, 705},  {3356, 690},
        {3347, 676},  {3338, 661},  {3329, 647},  {3319, 632},  {3309, 618},
        {3299, 603},  {3289, 589},  {3279, 574},  {3269, 560},  {3259, 546},
        {3249, 531},  {3239, 517},  {3229, 502},  {3219, 488},  {3210, 473},
        {3201, 459},  {3192, 444},  {3183, 430},  {3173, 415},  {3164, 401},
        {3155, 386},  {3146, 372},  {3136, 357},  {3126, 343},  {3115, 328},
        {3104, 314},  {3092, 299},  {3079, 285},  {3065, 270},  {3051, 256},
        {3035, 241},  {3019, 227},  {3001, 212},  {2982, 198},  {2962, 183},
        {2940, 169},  {2916, 154},  {2890, 140},  {2861, 125},  {2829, 111},
        {2792, 96},   {2751, 82},   {2703, 67},   {2647, 53},   {2596, 42},
        {2581, 39},   {2500, 24}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData25TDot5C(uint16_t **output, int *datalen) {
    *datalen = 202;
    uint16_t data[][2] = {
        {4178, 2921}, {4134, 2907}, {4121, 2893}, {4111, 2878}, {4102, 2864},
        {4094, 2850}, {4088, 2836}, {4082, 2821}, {4077, 2807}, {4073, 2793},
        {4069, 2778}, {4065, 2764}, {4062, 2750}, {4059, 2736}, {4057, 2721},
        {4054, 2707}, {4051, 2693}, {4049, 2678}, {4047, 2664}, {4045, 2650},
        {4043, 2636}, {4041, 2621}, {4039, 2607}, {4037, 2593}, {4034, 2578},
        {4032, 2564}, {4029, 2550}, {4027, 2536}, {4023, 2521}, {4020, 2507},
        {4017, 2493}, {4012, 2478}, {4008, 2464}, {4003, 2450}, {3998, 2436},
        {3993, 2421}, {3988, 2407}, {3982, 2393}, {3976, 2378}, {3969, 2364},
        {3963, 2350}, {3957, 2335}, {3951, 2321}, {3944, 2307}, {3937, 2293},
        {3931, 2278}, {3925, 2264}, {3918, 2250}, {3912, 2235}, {3906, 2221},
        {3900, 2207}, {3894, 2193}, {3889, 2178}, {3884, 2164}, {3879, 2150},
        {3874, 2135}, {3869, 2121}, {3864, 2107}, {3860, 2093}, {3856, 2078},
        {3852, 2064}, {3848, 2050}, {3844, 2035}, {3840, 2021}, {3836, 2007},
        {3833, 1993}, {3829, 1978}, {3825, 1964}, {3822, 1950}, {3818, 1935},
        {3814, 1921}, {3810, 1907}, {3806, 1882}, {3802, 1878}, {3799, 1864},
        {3794, 1850}, {3790, 1835}, {3786, 1821}, {3782, 1807}, {3778, 1792},
        {3773, 1778}, {3769, 1764}, {3764, 1750}, {3760, 1735}, {3755, 1721},
        {3750, 1707}, {3746, 1692}, {3741, 1678}, {3736, 1664}, {3731, 1650},
        {3726, 1635}, {3721, 1621}, {3716, 1607}, {3711, 1592}, {3705, 1578},
        {3700, 1564}, {3695, 1550}, {3689, 1535}, {3683, 1521}, {3678, 1507},
        {3672, 1492}, {3666, 1478}, {3661, 1464}, {3655, 1449}, {3649, 1435},
        {3643, 1421}, {3637, 1407}, {3631, 1392}, {3625, 1378}, {3619, 1364},
        {3612, 1349}, {3606, 1335}, {3600, 1321}, {3594, 1307}, {3588, 1292},
        {3581, 1278}, {3575, 1264}, {3569, 1249}, {3563, 1235}, {3557, 1221},
        {3551, 1207}, {3545, 1192}, {3541, 1178}, {3536, 1164}, {3531, 1149},
        {3527, 1135}, {3523, 1121}, {3519, 1107}, {3515, 1092}, {3510, 1078},
        {3506, 1064}, {3501, 1049}, {3496, 1035}, {3491, 1021}, {3485, 1007},
        {3479, 992},  {3473, 978},  {3467, 964},  {3461, 949},  {3455, 935},
        {3449, 921},  {3443, 906},  {3437, 892},  {3430, 878},  {3423, 864},
        {3417, 849},  {3410, 835},  {3403, 821},  {3396, 806},  {3388, 792},
        {3381, 778},  {3373, 764},  {3365, 749},  {3357, 735},  {3349, 721},
        {3340, 706},  {3331, 692},  {3322, 678},  {3313, 664},  {3303, 649},
        {3293, 635},  {3283, 621},  {3273, 606},  {3262, 592},  {3252, 578},
        {3242, 564},  {3232, 549},  {3221, 535},  {3211, 521},  {3202, 506},
        {3192, 492},  {3182, 478},  {3173, 463},  {3164, 449},  {3154, 435},
        {3145, 421},  {3136, 406},  {3126, 392},  {3116, 378},  {3105, 363},
        {3094, 349},  {3083, 335},  {3070, 321},  {3057, 306},  {3043, 292},
        {3028, 278},  {3012, 263},  {2994, 249},  {2975, 235},  {2955, 221},
        {2933, 206},  {2909, 192},  {2883, 178},  {2854, 163},  {2822, 149},
        {2786, 135},  {2745, 121},  {2698, 106},  {2644, 92},   {2579, 78},
        {2547, 71},   {2500, 63}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData25T1C(uint16_t **output, int *datalen) {
    *datalen = 202;
    uint16_t data[][2] = {
        {4177, 2921}, {4107, 2907}, {4092, 2892}, {4081, 2878}, {4072, 2864},
        {4064, 2849}, {4057, 2835}, {4051, 2821}, {4046, 2807}, {4041, 2792},
        {4037, 2778}, {4033, 2764}, {4030, 2750}, {4027, 2735}, {4024, 2721},
        {4021, 2707}, {4017, 2693}, {4015, 2678}, {4013, 2664}, {4010, 2650},
        {4008, 2635}, {4005, 2621}, {4002, 2607}, {4000, 2593}, {3997, 2578},
        {3994, 2564}, {3991, 2550}, {3988, 2536}, {3985, 2521}, {3981, 2507},
        {3977, 2493}, {3973, 2478}, {3969, 2464}, {3964, 2450}, {3960, 2436},
        {3955, 2421}, {3950, 2407}, {3944, 2393}, {3939, 2379}, {3933, 2364},
        {3927, 2350}, {3921, 2336}, {3915, 2321}, {3909, 2307}, {3903, 2293},
        {3897, 2279}, {3891, 2264}, {3885, 2250}, {3880, 2236}, {3874, 2222},
        {3868, 2207}, {3863, 2193}, {3858, 2179}, {3853, 2164}, {3848, 2150},
        {3843, 2136}, {3838, 2122}, {3833, 2107}, {3829, 2093}, {3825, 2079},
        {3821, 2065}, {3817, 2050}, {3813, 2036}, {3808, 2022}, {3804, 2007},
        {3801, 1993}, {3797, 1979}, {3793, 1965}, {3789, 1950}, {3785, 1936},
        {3781, 1922}, {3777, 1908}, {3773, 1893}, {3769, 1879}, {3765, 1865},
        {3760, 1850}, {3756, 1836}, {3752, 1822}, {3748, 1808}, {3743, 1793},
        {3738, 1779}, {3734, 1765}, {3729, 1751}, {3725, 1736}, {3720, 1722},
        {3715, 1708}, {3710, 1693}, {3705, 1679}, {3700, 1665}, {3695, 1651},
        {3690, 1636}, {3684, 1622}, {3679, 1608}, {3673, 1594}, {3668, 1579},
        {3662, 1565}, {3657, 1551}, {3651, 1536}, {3646, 1522}, {3640, 1508},
        {3634, 1494}, {3628, 1479}, {3623, 1465}, {3617, 1451}, {3611, 1437},
        {3605, 1422}, {3599, 1408}, {3594, 1394}, {3588, 1380}, {3582, 1365},
        {3577, 1351}, {3571, 1337}, {3566, 1322}, {3560, 1308}, {3555, 1294},
        {3550, 1280}, {3545, 1265}, {3540, 1251}, {3535, 1237}, {3531, 1223},
        {3526, 1208}, {3521, 1194}, {3517, 1180}, {3512, 1165}, {3508, 1151},
        {3503, 1137}, {3499, 1123}, {3494, 1108}, {3490, 1094}, {3485, 1080},
        {3481, 1066}, {3476, 1051}, {3471, 1037}, {3466, 1023}, {3461, 1008},
        {3455, 994},  {3450, 980},  {3444, 966},  {3439, 951},  {3433, 937},
        {3428, 923},  {3422, 909},  {3416, 894},  {3410, 880},  {3404, 866},
        {3398, 851},  {3391, 837},  {3384, 823},  {3377, 809},  {3370, 794},
        {3363, 780},  {3356, 766},  {3348, 752},  {3341, 737},  {3332, 723},
        {3324, 709},  {3315, 694},  {3307, 680},  {3298, 666},  {3288, 652},
        {3279, 637},  {3269, 623},  {3259, 609},  {3249, 595},  {3238, 580},
        {3232, 566},  {3221, 552},  {3207, 537},  {3197, 523},  {3187, 509},
        {3177, 495},  {3167, 480},  {3157, 466},  {3148, 452},  {3138, 438},
        {3129, 423},  {3119, 409},  {3109, 395},  {3099, 380},  {3088, 366},
        {3077, 352},  {3066, 338},  {3053, 323},  {3040, 309},  {3026, 295},
        {3011, 281},  {2995, 266},  {2978, 252},  {2959, 238},  {2939, 223},
        {2917, 209},  {2893, 195},  {2867, 181},  {2838, 166},  {2807, 152},
        {2772, 138},  {2732, 124},  {2687, 109},  {2635, 95},   {2574, 81},
        {2561, 78},   {2500, 67}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData25T2C(uint16_t **output, int *datalen) {
    *datalen = 201;
    uint16_t data[][2] = {
        {4178, 2921}, {4062, 2907}, {4043, 2892}, {4029, 2878}, {4019, 2864},
        {4011, 2850}, {4004, 2835}, {3998, 2821}, {3992, 2807}, {3987, 2793},
        {3983, 2779}, {3979, 2764}, {3976, 2750}, {3972, 2736}, {3969, 2722},
        {3966, 2707}, {3963, 2693}, {3961, 2679}, {3958, 2665}, {3955, 2650},
        {3952, 2636}, {3949, 2622}, {3946, 2608}, {3943, 2594}, {3940, 2579},
        {3937, 2565}, {3934, 2551}, {3931, 2537}, {3927, 2522}, {3924, 2508},
        {3920, 2494}, {3917, 2480}, {3912, 2465}, {3908, 2451}, {3904, 2437},
        {3899, 2423}, {3894, 2408}, {3889, 2394}, {3884, 2380}, {3879, 2366},
        {3873, 2352}, {3868, 2337}, {3862, 2323}, {3857, 2309}, {3851, 2295},
        {3845, 2280}, {3839, 2266}, {3834, 2252}, {3828, 2238}, {3823, 2223},
        {3817, 2209}, {3812, 2195}, {3807, 2181}, {3802, 2166}, {3797, 2152},
        {3792, 2138}, {3787, 2124}, {3782, 2110}, {3778, 2095}, {3774, 2081},
        {3770, 2067}, {3765, 2053}, {3761, 2038}, {3757, 2024}, {3753, 2010},
        {3749, 1996}, {3745, 1981}, {3741, 1967}, {3737, 1953}, {3733, 1939},
        {3729, 1925}, {3725, 1910}, {3721, 1896}, {3716, 1882}, {3712, 1868},
        {3708, 1853}, {3704, 1839}, {3699, 1825}, {3695, 1811}, {3690, 1796},
        {3686, 1782}, {3681, 1768}, {3677, 1754}, {3672, 1740}, {3667, 1725},
        {3662, 1711}, {3657, 1697}, {3652, 1683}, {3647, 1668}, {3642, 1654},
        {3637, 1640}, {3632, 1626}, {3627, 1611}, {3621, 1597}, {3616, 1583},
        {3611, 1569}, {3606, 1554}, {3600, 1540}, {3595, 1526}, {3590, 1512},
        {3584, 1498}, {3579, 1483}, {3573, 1469}, {3568, 1455}, {3563, 1441},
        {3558, 1426}, {3552, 1412}, {3547, 1398}, {3542, 1384}, {3537, 1369},
        {3532, 1355}, {3527, 1341}, {3522, 1327}, {3517, 1313}, {3512, 1298},
        {3507, 1284}, {3502, 1270}, {3497, 1256}, {3493, 1241}, {3488, 1227},
        {3483, 1213}, {3479, 1199}, {3474, 1184}, {3469, 1170}, {3465, 1156},
        {3460, 1142}, {3456, 1128}, {3451, 1113}, {3446, 1099}, {3442, 1085},
        {3437, 1071}, {3433, 1056}, {3428, 1042}, {3423, 1028}, {3418, 1014},
        {3413, 999},  {3408, 985},  {3403, 971},  {3398, 957},  {3392, 943},
        {3387, 928},  {3382, 914},  {3376, 900},  {3370, 886},  {3364, 871},
        {3359, 857},  {3353, 843},  {3346, 829},  {3340, 814},  {3333, 800},
        {3327, 786},  {3319, 772},  {3312, 758},  {3305, 743},  {3297, 729},
        {3289, 715},  {3281, 701},  {3273, 686},  {3264, 672},  {3255, 658},
        {3245, 644},  {3236, 629},  {3226, 615},  {3216, 601},  {3206, 587},
        {3196, 572},  {3185, 558},  {3175, 544},  {3165, 530},  {3155, 516},
        {3145, 501},  {3135, 487},  {3125, 473},  {3115, 459},  {3106, 444},
        {3096, 430},  {3086, 416},  {3076, 402},  {3065, 387},  {3055, 373},
        {3043, 359},  {3032, 345},  {3019, 331},  {3006, 316},  {2992, 302},
        {2977, 288},  {2962, 274},  {2944, 259},  {2926, 245},  {2906, 231},
        {2884, 217},  {2861, 202},  {2835, 188},  {2807, 174},  {2776, 160},
        {2742, 146},  {2703, 131},  {2659, 117},  {2607, 103},  {2547, 89},
        {2500, 79}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData25T4C(uint16_t **output, int *datalen) {
    *datalen = 201;
    uint16_t data[][2] = {
        {4178, 2921}, {3985, 2907}, {3958, 2893}, {3940, 2879}, {3928, 2864},
        {3918, 2850}, {3910, 2836}, {3904, 2822}, {3899, 2807}, {3894, 2793},
        {3891, 2779}, {3887, 2765}, {3884, 2751}, {3880, 2736}, {3877, 2722},
        {3874, 2708}, {3870, 2694}, {3867, 2679}, {3864, 2665}, {3861, 2651},
        {3858, 2637}, {3855, 2623}, {3852, 2608}, {3849, 2594}, {3845, 2580},
        {3842, 2566}, {3839, 2551}, {3836, 2537}, {3832, 2523}, {3829, 2509},
        {3825, 2495}, {3821, 2480}, {3817, 2466}, {3813, 2452}, {3809, 2438},
        {3805, 2423}, {3800, 2409}, {3796, 2395}, {3791, 2381}, {3787, 2367},
        {3782, 2352}, {3777, 2338}, {3772, 2324}, {3767, 2310}, {3762, 2295},
        {3757, 2281}, {3752, 2267}, {3747, 2253}, {3742, 2239}, {3737, 2224},
        {3733, 2210}, {3728, 2196}, {3724, 2182}, {3719, 2167}, {3715, 2153},
        {3710, 2139}, {3706, 2125}, {3702, 2111}, {3698, 2096}, {3694, 2082},
        {3690, 2068}, {3686, 2054}, {3682, 2039}, {3678, 2025}, {3674, 2011},
        {3670, 1997}, {3666, 1983}, {3663, 1968}, {3659, 1954}, {3655, 1940},
        {3651, 1926}, {3647, 1911}, {3643, 1897}, {3639, 1883}, {3635, 1869},
        {3631, 1855}, {3627, 1840}, {3623, 1826}, {3619, 1812}, {3615, 1798},
        {3610, 1783}, {3606, 1769}, {3602, 1755}, {3597, 1741}, {3593, 1727},
        {3588, 1712}, {3584, 1698}, {3579, 1684}, {3575, 1670}, {3570, 1655},
        {3565, 1641}, {3560, 1627}, {3556, 1613}, {3551, 1599}, {3546, 1584},
        {3541, 1570}, {3536, 1556}, {3531, 1542}, {3526, 1527}, {3521, 1513},
        {3516, 1499}, {3511, 1485}, {3506, 1471}, {3501, 1456}, {3496, 1442},
        {3491, 1428}, {3486, 1414}, {3481, 1399}, {3476, 1385}, {3471, 1371},
        {3466, 1357}, {3462, 1343}, {3457, 1328}, {3452, 1314}, {3447, 1300},
        {3443, 1286}, {3438, 1271}, {3433, 1257}, {3429, 1243}, {3424, 1229},
        {3419, 1215}, {3415, 1200}, {3410, 1186}, {3406, 1172}, {3401, 1158},
        {3397, 1143}, {3392, 1129}, {3387, 1115}, {3383, 1101}, {3378, 1087},
        {3374, 1072}, {3369, 1058}, {3365, 1044}, {3360, 1030}, {3355, 1015},
        {3350, 1001}, {3345, 987},  {3341, 973},  {3336, 959},  {3331, 944},
        {3325, 930},  {3320, 916},  {3315, 902},  {3310, 887},  {3304, 873},
        {3298, 859},  {3293, 845},  {3287, 831},  {3281, 816},  {3274, 802},
        {3268, 788},  {3261, 774},  {3254, 760},  {3247, 745},  {3240, 731},
        {3232, 717},  {3224, 703},  {3216, 688},  {3208, 674},  {3199, 660},
        {3190, 646},  {3181, 632},  {3171, 617},  {3162, 603},  {3152, 589},
        {3142, 575},  {3133, 560},  {3123, 546},  {3113, 532},  {3103, 518},
        {3094, 504},  {3084, 489},  {3074, 475},  {3065, 461},  {3055, 447},
        {3045, 432},  {3035, 418},  {3025, 404},  {3014, 390},  {3004, 376},
        {2993, 361},  {2981, 347},  {2969, 333},  {2956, 319},  {2943, 304},
        {2929, 290},  {2914, 276},  {2898, 262},  {2881, 248},  {2863, 233},
        {2843, 219},  {2822, 205},  {2799, 191},  {2775, 176},  {2747, 162},
        {2717, 148},  {2683, 134},  {2645, 120},  {2600, 105},  {2548, 91},
        {2500, 80}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData40TDot1C(uint16_t **output, int *datalen) {
    *datalen = 202;
    uint16_t data[][2] = {
        {4182, 2920}, {4163, 2905}, {4151, 2891}, {4141, 2876}, {4132, 2862},
        {4125, 2847}, {4118, 2833}, {4112, 2818}, {4107, 2804}, {4103, 2789},
        {4099, 2775}, {4096, 2761}, {4093, 2746}, {4089, 2732}, {4087, 2717},
        {4085, 2703}, {4082, 2688}, {4080, 2674}, {4079, 2659}, {4077, 2645},
        {4075, 2630}, {4073, 2616}, {4072, 2601}, {4070, 2587}, {4068, 2572},
        {4067, 2558}, {4065, 2543}, {4062, 2529}, {4060, 2514}, {4057, 2500},
        {4054, 2486}, {4051, 2471}, {4047, 2457}, {4043, 2442}, {4038, 2428},
        {4034, 2413}, {4029, 2399}, {4024, 2384}, {4018, 2370}, {4013, 2355},
        {4007, 2341}, {4002, 2326}, {3996, 2312}, {3990, 2297}, {3984, 2283},
        {3978, 2268}, {3971, 2254}, {3965, 2239}, {3959, 2225}, {3953, 2210},
        {3947, 2196}, {3940, 2182}, {3933, 2167}, {3926, 2153}, {3919, 2138},
        {3912, 2124}, {3905, 2109}, {3899, 2095}, {3893, 2080}, {3887, 2066},
        {3882, 2051}, {3878, 2037}, {3874, 2022}, {3870, 2008}, {3866, 1993},
        {3862, 1979}, {3859, 1964}, {3855, 1950}, {3852, 1935}, {3848, 1921},
        {3845, 1906}, {3841, 1892}, {3837, 1878}, {3834, 1863}, {3830, 1849},
        {3827, 1834}, {3823, 1820}, {3819, 1805}, {3815, 1791}, {3811, 1776},
        {3807, 1762}, {3803, 1747}, {3799, 1733}, {3795, 1718}, {3790, 1704},
        {3786, 1689}, {3782, 1675}, {3777, 1660}, {3773, 1646}, {3768, 1631},
        {3763, 1617}, {3758, 1603}, {3753, 1588}, {3747, 1574}, {3741, 1559},
        {3735, 1545}, {3728, 1530}, {3721, 1516}, {3714, 1501}, {3708, 1487},
        {3701, 1472}, {3695, 1458}, {3688, 1443}, {3681, 1429}, {3675, 1414},
        {3668, 1400}, {3662, 1385}, {3655, 1371}, {3649, 1356}, {3643, 1342},
        {3637, 1327}, {3630, 1313}, {3623, 1299}, {3616, 1284}, {3608, 1270},
        {3602, 1255}, {3595, 1241}, {3588, 1226}, {3582, 1212}, {3575, 1197},
        {3568, 1183}, {3562, 1168}, {3556, 1154}, {3552, 1139}, {3548, 1125},
        {3544, 1110}, {3540, 1096}, {3537, 1081}, {3533, 1067}, {3529, 1052},
        {3525, 1038}, {3520, 1023}, {3515, 1009}, {3509, 995},  {3500, 980},
        {3492, 966},  {3485, 951},  {3479, 937},  {3473, 922},  {3467, 908},
        {3460, 893},  {3453, 879},  {3446, 864},  {3439, 850},  {3432, 835},
        {3424, 821},  {3417, 806},  {3409, 792},  {3402, 777},  {3394, 763},
        {3386, 748},  {3378, 734},  {3370, 720},  {3361, 705},  {3353, 691},
        {3344, 676},  {3335, 662},  {3326, 647},  {3316, 633},  {3306, 618},
        {3297, 604},  {3287, 589},  {3277, 575},  {3267, 560},  {3257, 546},
        {3247, 531},  {3238, 517},  {3228, 502},  {3219, 488},  {3210, 473},
        {3201, 459},  {3192, 444},  {3183, 430},  {3173, 416},  {3164, 401},
        {3155, 387},  {3146, 372},  {3136, 358},  {3125, 343},  {3115, 329},
        {3103, 314},  {3091, 300},  {3078, 285},  {3065, 271},  {3050, 256},
        {3035, 242},  {3019, 227},  {3001, 213},  {2983, 198},  {2963, 184},
        {2941, 169},  {2918, 155},  {2892, 141},  {2864, 126},  {2832, 112},
        {2795, 97},   {2753, 83},   {2705, 68},   {2648, 54},   {2581, 39},
        {2506, 26},   {2500, 25}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData40T1C(uint16_t **output, int *datalen) {
    *datalen = 200;
    uint16_t data[][2] = {
        {4182, 2919}, {4127, 2905}, {4113, 2891}, {4102, 2876}, {4093, 2862},
        {4085, 2847}, {4078, 2833}, {4072, 2819}, {4067, 2804}, {4062, 2790},
        {4058, 2775}, {4054, 2761}, {4051, 2747}, {4048, 2732}, {4045, 2718},
        {4042, 2704}, {4039, 2689}, {4037, 2675}, {4035, 2660}, {4033, 2646},
        {4030, 2632}, {4028, 2617}, {4026, 2603}, {4024, 2588}, {4021, 2574},
        {4018, 2560}, {4016, 2545}, {4013, 2531}, {4010, 2516}, {4007, 2502},
        {4003, 2488}, {3999, 2473}, {3995, 2459}, {3990, 2444}, {3985, 2430},
        {3980, 2416}, {3975, 2401}, {3970, 2387}, {3964, 2373}, {3958, 2358},
        {3952, 2344}, {3945, 2329}, {3939, 2315}, {3933, 2301}, {3927, 2286},
        {3920, 2272}, {3914, 2257}, {3908, 2243}, {3902, 2229}, {3896, 2214},
        {3890, 2200}, {3885, 2185}, {3880, 2171}, {3874, 2157}, {3869, 2142},
        {3864, 2128}, {3860, 2113}, {3855, 2099}, {3851, 2085}, {3846, 2070},
        {3842, 2056}, {3838, 2041}, {3834, 2027}, {3830, 2013}, {3826, 1998},
        {3822, 1984}, {3818, 1970}, {3814, 1955}, {3811, 1941}, {3807, 1926},
        {3803, 1912}, {3799, 1898}, {3795, 1883}, {3791, 1869}, {3787, 1854},
        {3782, 1840}, {3778, 1826}, {3774, 1811}, {3770, 1797}, {3765, 1782},
        {3760, 1768}, {3756, 1754}, {3751, 1739}, {3747, 1725}, {3742, 1710},
        {3737, 1696}, {3732, 1682}, {3727, 1667}, {3722, 1653}, {3717, 1638},
        {3712, 1624}, {3707, 1610}, {3702, 1595}, {3696, 1581}, {3691, 1567},
        {3685, 1552}, {3680, 1538}, {3674, 1523}, {3669, 1509}, {3663, 1495},
        {3657, 1480}, {3651, 1466}, {3646, 1451}, {3640, 1437}, {3634, 1423},
        {3628, 1408}, {3622, 1394}, {3616, 1379}, {3609, 1365}, {3603, 1351},
        {3597, 1336}, {3591, 1322}, {3585, 1307}, {3578, 1293}, {3572, 1279},
        {3566, 1264}, {3560, 1250}, {3553, 1235}, {3547, 1221}, {3541, 1207},
        {3535, 1192}, {3530, 1178}, {3525, 1164}, {3520, 1149}, {3516, 1135},
        {3511, 1120}, {3507, 1106}, {3502, 1092}, {3498, 1077}, {3493, 1063},
        {3489, 1048}, {3484, 1034}, {3480, 1020}, {3473, 1005}, {3467, 991},
        {3461, 976},  {3455, 962},  {3448, 948},  {3442, 933},  {3436, 919},
        {3430, 904},  {3423, 890},  {3417, 876},  {3410, 861},  {3403, 847},
        {3396, 832},  {3389, 818},  {3382, 804},  {3374, 789},  {3366, 775},
        {3359, 761},  {3351, 746},  {3343, 732},  {3334, 717},  {3326, 703},
        {3317, 689},  {3308, 674},  {3298, 660},  {3289, 645},  {3279, 631},
        {3269, 617},  {3259, 602},  {3249, 588},  {3239, 573},  {3228, 559},
        {3218, 545},  {3208, 530},  {3198, 516},  {3188, 501},  {3179, 487},
        {3169, 473},  {3160, 458},  {3150, 444},  {3141, 429},  {3131, 415},
        {3122, 401},  {3112, 386},  {3102, 372},  {3091, 358},  {3080, 343},
        {3068, 329},  {3055, 314},  {3042, 300},  {3028, 286},  {3012, 271},
        {2996, 257},  {2979, 242},  {2961, 228},  {2941, 214},  {2919, 199},
        {2896, 185},  {2871, 170},  {2843, 156},  {2812, 142},  {2777, 127},
        {2736, 113},  {2690, 98},   {2636, 84},   {2570, 70},   {2500, 57}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}

void SOC_getChargeData40T4C(uint16_t **output, int *datalen) {
    *datalen = 199;
    uint16_t data[][2] = {
        {4182, 2920}, {4033, 2906}, {4011, 2891}, {3995, 2877}, {3983, 2863},
        {3973, 2848}, {3965, 2834}, {3958, 2820}, {3953, 2805}, {3948, 2791},
        {3939, 2777}, {3936, 2748}, {3932, 2734}, {3928, 2719}, {3925, 2705},
        {3922, 2691}, {3919, 2677}, {3915, 2662}, {3912, 2648}, {3909, 2634},
        {3906, 2619}, {3902, 2605}, {3899, 2591}, {3896, 2576}, {3892, 2562},
        {3889, 2548}, {3886, 2533}, {3882, 2519}, {3879, 2505}, {3875, 2491},
        {3871, 2476}, {3867, 2462}, {3863, 2448}, {3859, 2433}, {3854, 2419},
        {3849, 2405}, {3845, 2390}, {3839, 2376}, {3834, 2362}, {3829, 2347},
        {3824, 2333}, {3818, 2319}, {3812, 2304}, {3807, 2290}, {3801, 2276},
        {3796, 2262}, {3790, 2247}, {3785, 2233}, {3780, 2219}, {3774, 2204},
        {3769, 2190}, {3764, 2176}, {3759, 2161}, {3754, 2147}, {3749, 2133},
        {3745, 2118}, {3740, 2104}, {3736, 2090}, {3731, 2075}, {3727, 2061},
        {3723, 2047}, {3718, 2033}, {3714, 2018}, {3710, 2004}, {3706, 1990},
        {3702, 1975}, {3697, 1961}, {3693, 1947}, {3689, 1932}, {3685, 1918},
        {3681, 1904}, {3677, 1889}, {3672, 1875}, {3668, 1861}, {3664, 1847},
        {3659, 1832}, {3655, 1818}, {3650, 1804}, {3646, 1789}, {3641, 1775},
        {3636, 1761}, {3632, 1746}, {3627, 1732}, {3622, 1718}, {3617, 1703},
        {3612, 1689}, {3607, 1675}, {3602, 1660}, {3597, 1646}, {3592, 1632},
        {3587, 1618}, {3582, 1603}, {3577, 1589}, {3572, 1575}, {3567, 1560},
        {3561, 1546}, {3556, 1532}, {3551, 1517}, {3546, 1503}, {3541, 1489},
        {3535, 1474}, {3530, 1460}, {3525, 1446}, {3520, 1432}, {3515, 1417},
        {3510, 1403}, {3504, 1389}, {3499, 1374}, {3494, 1360}, {3489, 1346},
        {3484, 1331}, {3480, 1317}, {3475, 1303}, {3470, 1288}, {3465, 1274},
        {3460, 1260}, {3455, 1245}, {3450, 1231}, {3445, 1217}, {3440, 1203},
        {3436, 1188}, {3431, 1174}, {3426, 1160}, {3421, 1145}, {3416, 1131},
        {3411, 1117}, {3406, 1102}, {3401, 1088}, {3397, 1074}, {3392, 1059},
        {3387, 1045}, {3382, 1031}, {3377, 1017}, {3372, 1002}, {3366, 988},
        {3361, 974},  {3356, 959},  {3350, 945},  {3345, 931},  {3339, 916},
        {3333, 902},  {3327, 888},  {3321, 873},  {3315, 859},  {3309, 845},
        {3302, 830},  {3295, 816},  {3289, 802},  {3281, 788},  {3274, 773},
        {3267, 759},  {3259, 745},  {3251, 730},  {3243, 716},  {3235, 702},
        {3226, 687},  {3217, 673},  {3208, 659},  {3199, 644},  {3189, 630},
        {3179, 616},  {3170, 602},  {3160, 587},  {3150, 573},  {3140, 559},
        {3130, 544},  {3120, 530},  {3110, 516},  {3101, 501},  {3091, 487},
        {3081, 473},  {3072, 458},  {3062, 444},  {3052, 430},  {3042, 416},
        {3032, 401},  {3022, 387},  {3011, 373},  {3000, 358},  {2989, 344},
        {2976, 330},  {2963, 315},  {2950, 301},  {2935, 287},  {2920, 272},
        {2904, 258},  {2887, 244},  {2868, 229},  {2848, 215},  {2827, 201},
        {2803, 187},  {2778, 172},  {2749, 158},  {2718, 144},  {2681, 129},
        {2640, 115},  {2591, 101},  {2532, 86},   {2500, 79}};

    output = malloc(sizeof(uint16_t *) * (*datalen));
    for (int i = 0; i < *datalen; ++i) {
        output[i] = malloc(sizeof(uint16_t) * 2);
        output[i][0] = data[i][0];
        output[i][1] = data[i][1];
    }
}
